
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logo D√©clinaisons</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="lib/CSInterface.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <img class="logo" src="./media/logo.svg">
                    <p class="subtitle">Logo variations in 3 clics.</p>
                </div>
                <div class="header-right">
                    <button id="license-key-btn" class="license-key-btn">
                        <span id="license-key-text">License Key</span>
                    </button>
                </div>
            </div>

            <!-- Trial Status Badge -->
            <div id="trial-badge" class="trial-badge" style="display: none;">
                <span id="trial-text">üéÅ 7 g√©n√©rations gratuites</span>
            </div>
        </header>

        <!-- Navigation par onglets -->
        <nav class="tabs">
            <button class="tab-button active" data-tab="selection">S√©lection</button>
            <button class="tab-button" data-tab="colors">Couleur</button>
            <button class="tab-button" data-tab="export">Export</button>
        </nav>

        <main>
            <!-- Onglet 1: S√©lection -->
            <div class="tab-content active" id="tab-selection">
               <section class="panel panel-bottom">
                    <h2>S√©lection des variantes du logo</h2>
                    <p class="subtitle">s√©lectionne chaque √©l√©ment correspondant aux variantes</p>
                    <div class="logo-selection">
                         <!-- Ic√¥ne seule -->
                        <div class="selection-item">
                        <label>Ic√¥ne seule</label>
                        <div class="selection-controls">
                            <span class="selection-status" id="status-icon">Pas s√©lect</span>
                            <button class="btn-select" data-type="icon">Valider</button>
                        </div>
                        </div>

                        <!-- Typographie seule -->
                        <div class="selection-item">
                        <label>Typographie seule</label>
                        <div class="selection-controls">
                            <span class="selection-status" id="status-text">Pas s√©lect</span>
                            <button class="btn-select" data-type="text">Valider</button>
                        </div>
                        </div>
                        <!-- Version horizontale -->
                        <div class="selection-item">
                        <label>Version horizontale</label>
                        <div class="selection-controls">
                               <button id="generate-horizontal-layout" class="btn-select2">G√©n√©ration auto</button>
                            <span class="selection-status" id="status-horizontal">Pas s√©lect</span>
                            <button class="btn-select" data-type="horizontal">Valider</button>
                        </div>
                        </div>

                        <!-- Version verticale -->
                        <div class="selection-item">
                        <label>Version verticale</label>
                        <div class="selection-controls">
                             <button id="generate-vertical-layout" class="btn-select2">G√©n√©ration auto</button>
                            <span class="selection-status" id="status-vertical">Pas s√©lect</span>
                            <button class="btn-select" data-type="vertical">Valider</button>
                        </div>
                        </div>

                        <!-- Conteneur pour les variations custom -->
                        <div id="custom-variations-container"></div>

                        <!-- Bouton pour ajouter des variations -->
                        <div style="margin-top: 1em; text-align: center;">
                            <button id="add-variation-btn" class="btn-secondary" style="padding: 0.5em 1em;">
                                + Ajouter un custom
                            </button>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Onglet 2: Couleurs -->
            <div class="tab-content" id="tab-colors">
                   <section class="panel">
                <h2>Param√®tres du document</h2>

                <div style="margin-bottom: 1em;">
                    <label for="color-mode" style="display: block; margin-bottom: 0.5em;">Mode couleur:</label>
                    <select id="color-mode" style="width: 100%; padding: 0.5em; font-size: 14px;">
                        <option value="RGB" selected>RGB</option>
                        <option value="CMYK">CMJN (CMYK)</option>
                    </select>
                </div>

                <div>
                    <label for="document-ppi" style="display: block; margin-bottom: 0.5em;">
                        R√©solution (PPI):
                    </label>
                    <input type="number" id="document-ppi" min="1" max="999" value="72" style="width: 100%; padding: 0.5em; font-size: 14px;">
                    <div style="font-size: 12px; color: #999; margin-top: 0.25em;">
                        Valeurs courantes: 72 (Web), 150, 300 (Print)
                    </div>
                </div>
            </section>
            <section class="panel panel-bottom">
                <h2>Couleurs</h2>
                <div class="checkbox-group">
                    <label class="checkbox-label color-locked">
                        <input type="checkbox" id="color-original" checked disabled>
                        <span>Couleurs d'origine</span>
                        <span class="lock-icon">üîí</span>
                    </label>

                    <label class="checkbox-label">
                        <input type="checkbox" id="color-bw">
                        <span>Nuances de gris</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="color-black">
                        <span>Monochromie</span>
                        <button type="button" id="black-color-picker" class="color-picker-btn" title="Cliquer pour ouvrir le s√©lecteur de couleur (avec pipette)" style="margin-left: 0.5em; background-color: #000000;"></button>
                    </label>

                    <label class="checkbox-label">
                        <input type="checkbox" id="color-light">
                        <span>Monochromie light (avec fond noir pour PDF)</span>
                        <button type="button" id="light-color-picker" class="color-picker-btn" title="Cliquer pour ouvrir le s√©lecteur de couleur (avec pipette)" style="margin-left: 0.5em; background-color: #ffffff;"></button>
                    </label>

                    <label class="checkbox-label">
                        <input type="checkbox" id="color-custom">
                        <span>Couleurs customs</span>
                    </label>
                </div>

                <div id="custom-colors-section" style="display: none; margin-top: 1em;">
                    <button id="analyze-colors-btn" class="btn-secondary btn-large">Analyser les couleurs</button>
                    <div id="colors-mapping" style="margin-top: 1em;"></div>
                </div>
            </section>
            </div>

            <!-- Onglet 3: Export -->
            <div class="tab-content" id="tab-export">
                <section class="panel">
                <h2>Types de plans de travail</h2>

                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="artboard-fit" checked>
                        <span>Fit-content (adapt√© au contenu)</span>
                    </label>

                    <label class="checkbox-label">
                        <input type="checkbox" id="artboard-square" checked>
                        <span>Carr√©</span>
                    </label>
                </div>
            </section>

                <section class="panel" id="margins-section">
                <h2>Marges</h2>

                <div id="margin-fit-container" class="margin-control" style="display: none; margin-bottom: 1em;">
                    <label for="margin-fit" style="display: block; margin-bottom: 0.5em;">
                        Marge Fit-content: <span id="margin-fit-value">0</span>%
                    </label>
                    <input type="range" id="margin-fit" min="0" max="40" value="0" step="1" style="width: 100%;">
                </div>

                <div id="margin-square-container" class="margin-control" style="display: none;">
                    <label for="margin-square" style="display: block; margin-bottom: 0.5em;">
                        Marge Carr√©: <span id="margin-square-value">10</span>%
                    </label>
                    <input type="range" id="margin-square" min="0" max="40" value="10" step="1" style="width: 100%;">
                </div>
            </section>

                <section class="panel panel-bottom" id="export-section">
                <h2>Options d'export</h2>
                <div class="export-options">
                    <label><input type="checkbox" id="export-png"> PNG</label>
                    <label><input type="checkbox" id="export-jpg"> JPG</label>
                    <label><input type="checkbox" id="export-svg"> SVG</label>
                    <label><input type="checkbox" id="export-ai"> AI</label>
                    <label><input type="checkbox" id="export-pdf"> PDF</label>
                </div>
                <div class="export-path">
                    <label for="output-folder">Dossier de sortie :</label>
                    <input type="text" id="output-folder" readonly placeholder="Choisir un dossier...">
                    <button id="browse-folder">Parcourir</button>
                </div>
                <div class="export-sizes">
                    <label>Tailles d'export (PNG & JPG) :</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="size-small" value="1000" checked>
                            <span>Petit (1000 px)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="size-medium" value="2000">
                            <span>Moyen (2000 px)</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="size-large" value="4000">
                            <span>Grand (4000 px)</span>
                        </label>
                    </div>
                    <div class="custom-size">
                        <label class="checkbox-label">
                        <input type="checkbox" id="custom-size-enable">
                        <span>Personnalis√©</span>
                        </label>
                        <div id="custom-size-inputs" style="display: none; margin-top: 0.5em;">
                        <label for="custom-width">Largeur (px) :</label>
                        <input type="number" id="custom-width" value="1000" min="1" style="width:5em">
                        <label for="custom-height" style="margin-left:1em">Hauteur (px) :</label>
                        <input type="number" id="custom-height" value="1000" min="1" style="width:5em">
                        </div>
                    </div>
                    <div class="custom-size-lock" style="margin-top:0.5em">
                    <label class="checkbox-label">
                        <input type="checkbox" id="lock-aspect-ratio"  checked>
                        <span>Conserver le ratio</span>
                    </label>
                    </div>

                    <!-- Section Favicon (visible uniquement si icon est s√©lectionn√©) -->
                    <div id="favicon-section" style="display: none; margin-top: 1em; padding-top: 1em; border-top: 1px solid #444;">
                        <label class="checkbox-label">
                            <input type="checkbox" id="favicon-enable">
                            <span>Favicon (32√ó32 px - uniquement ic√¥ne)</span>
                        </label>
                        <div style="font-size: 11px; color: #999; margin-left: 1.5em; margin-top: 0.25em;">
                            Exporte l'ic√¥ne en 32√ó32 pixels dans toutes les variantes de couleurs
                        </div>
                    </div>

                </div>

                </section>

                <!-- Pr√©sentation InDesign -->
                <section class="panel" id="presentation-section">
                    <h2>Pr√©sentation logo</h2>
                    <p class="section-desc">G√©n√®re un fichier InDesign (.idml) √©ditable √† partir d'un template.</p>

                    <div class="template-selector">
                        <label class="template-option">
                            <input type="radio" name="template" value="template-1" checked>
                            <span class="template-preview">
                                <span class="template-name">Minimaliste</span>
                            </span>
                        </label>
                        <label class="template-option">
                            <input type="radio" name="template" value="template-2">
                            <span class="template-preview">
                                <span class="template-name">Classique</span>
                            </span>
                        </label>
                        <label class="template-option">
                            <input type="radio" name="template" value="template-3">
                            <span class="template-preview">
                                <span class="template-name">D√©taill√©</span>
                            </span>
                        </label>
                    </div>

                    <div class="presentation-name">
                        <label for="brand-name">Nom de la marque :</label>
                        <input type="text" id="brand-name" placeholder="Ma Marque">
                    </div>

                    <div class="presentation-name font-autocomplete-wrapper">
                        <label for="brand-font-primary">Police principale :</label>
                        <div class="font-input-container">
                            <input type="text" id="brand-font-primary" placeholder="Montserrat" value="" autocomplete="off">
                            <div class="font-dropdown" id="font-dropdown-primary"></div>
                        </div>
                    </div>
                    <div class="presentation-name font-autocomplete-wrapper">
                        <label for="brand-font-secondary">Police secondaire :</label>
                        <div class="font-input-container">
                            <input type="text" id="brand-font-secondary" placeholder="Open Sans" value="" autocomplete="off">
                            <div class="font-dropdown" id="font-dropdown-secondary"></div>
                        </div>
                    </div>

                    <div class="presentation-name">
                        <label for="zone-margin">Zone de protection :</label>
                        <div style="display: flex; align-items: center; gap: 0.5em;">
                            <input type="range" id="zone-margin" min="5" max="40" value="15" step="1" style="flex: 1;">
                            <span id="zone-margin-value">15</span>%
                        </div>
                    </div>

                    <button id="btn-generate-presentation" class="btn-secondary btn-large" disabled>
                        G√©n√©rer pr√©sentation InDesign
                    </button>
                </section>
            </div>

            <!-- Actions communes √† tous les onglets -->
            <section class="panel actions-panel">
                <!-- Navigation entre onglets -->
                <div class="tab-navigation">
                    <button id="prev-tab-btn" class="btn-secondary" disabled>‚Üê Pr√©c√©dent</button>
                    <button id="next-tab-btn" class="btn-secondary">Suivant ‚Üí</button>
                </div>

                <button id="generate-btn" class="btn-primary btn-large" disabled>
                    G√©n√©rer les plans de travail
                </button>

                <div class="summary" id="summary" style="display: none;">
                    <p>Plans de travail √† cr√©er : <strong id="artboard-count">0</strong></p>
                </div>
            </section>

            <!-- Zone de status -->
            <div class="status-message" id="status" style="display: none;"></div>
        </main>
    </div>

    <!-- License Modal (Activation & Manage) -->
    <div id="license-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="license-modal-title">üîë License Key</h2>
                <button class="modal-close" id="close-license-modal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Activation Form (shown when no license) -->
                <div id="license-activation-form">
                    <p class="modal-description">
                        Entrez votre cl√© de licence pour d√©bloquer l'acc√®s illimit√© et le mode offline.
                    </p>
                    <div class="form-group">
                        <label for="license-key-input" class="form-label">Cl√© de licence :</label>
                        <input type="text" id="license-key-input" class="form-input license-key-input" placeholder="xxxx-xxxx-xxxx-xxxx">
                    </div>
                </div>

                <!-- License Info (shown when license active) -->
                <div id="license-info-display" style="display: none;">
                    <div class="license-info-box">
                        <p class="license-info-title">‚úÖ Licence active</p>
                        <p class="license-info-item">
                            <strong>Type :</strong> <span id="license-type-display">-</span>
                        </p>
                        <p class="license-info-item">
                            <strong>Cl√© :</strong> <span id="license-key-display">-</span>
                        </p>
                    </div>
                    <p class="license-info-note">
                        D√©sactiver la licence lib√©rera une activation pour l'utiliser sur un autre appareil.
                    </p>
                </div>

                <div id="license-error" class="message-box error-box" style="display: none;"></div>
                <div id="license-success" class="message-box success-box" style="display: none;"></div>
            </div>
            <div class="modal-footer">
                <button id="cancel-license-btn" class="btn btn-secondary">
                    Fermer
                </button>
                <button id="activate-license-submit-btn" class="btn btn-primary">
                    Activer
                </button>
                <button id="deactivate-license-btn" class="btn btn-danger" style="display: none;">
                    D√©sactiver
                </button>
            </div>
        </div>
    </div>

    <!-- Update Modal -->
    <div id="update-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üéâ Mise √† jour disponible</h2>
                <button class="modal-close" id="close-update-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="update-info-box">
                    <p class="update-version-info">
                        <strong>Version actuelle :</strong> <span id="update-current-version">-</span><br>
                        <strong>Nouvelle version :</strong> <span id="update-new-version" style="color: #4CAF50;">-</span><br>
                        <strong>Date de sortie :</strong> <span id="update-release-date">-</span>
                    </p>

                    <div class="update-changelog">
                        <h3 style="margin-top: 20px; margin-bottom: 10px; font-size: 14px;">Nouveaut√©s :</h3>
                        <ul id="update-changelog" style="margin: 0; padding-left: 20px; font-size: 13px; line-height: 1.6;">
                            <!-- Rempli dynamiquement -->
                        </ul>
                    </div>
                </div>

                <p class="update-note" style="margin-top: 20px; font-size: 12px; color: #666;">
                    üí° Le t√©l√©chargement ouvrira votre navigateur. Installez le nouveau .zxp avec ZXP Installer.
                </p>
            </div>
            <div class="modal-footer">
                <button id="update-skip-btn" class="btn btn-secondary">
                    Plus tard
                </button>
                <button id="update-download-btn" class="btn btn-primary">
                    T√©l√©charger la mise √† jour
                </button>
            </div>
        </div>
    </div>

    <!-- Trial & Licensing System -->
    <script src="js/hwid.js"></script>
    <script src="js/debug-mode-enabler.js"></script>
    <script src="js/trial.js"></script>
    <script src="js/auto-updater.js"></script>
    <script src="lib/jszip.min.js"></script>
    <script src="js/idml-generator.js"></script>
    <script src="js/main.js"></script>
    <script src="js/updater.js"></script>
</body>
</html>
